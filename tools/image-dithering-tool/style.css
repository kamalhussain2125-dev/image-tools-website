:root[data-theme="dark"] {
  --bg: #0e1015;
  --card: #151922;
  --fg: #e7eaf3;
  --muted: #9aa1ad;
  --accent: #8fb4ff;
  --border: #242b3a;
}
:root[data-theme="light"] {
  --bg: #f6f8fb;
  --card: #ffffff;
  --fg: #11131a;
  --muted: #5e6677;
  --accent: #3a6efc;
  --border: #dbe1ea;
}
:root[data-theme="solarized"] {
  --bg: #002b36;
  --card: #073642;
  --fg: #eee8d5;
  --muted: #93a1a1;
  --accent: #268bd2;
  --border: #0b4252;
}
:root[data-theme="pro"] {
  --bg: #0a0c12;
  --card: rgba(20,25,36,0.65);
  --fg: #e8ebf5;
  --muted: #9aa6bf;
  --accent: #7aa2ff;
  --border: #2a3244;
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--bg);
  color: var(--fg);
}
header { padding: 1rem 1.5rem; }
header h1 { margin: 0 0 0.25rem 0; letter-spacing: 0.2px; }
header p { margin: 0; color: var(--muted); }

.controls {
  margin: 0 1.5rem;
  background: var(--card);
  border: 1px solid var(--border);
  padding: 1rem;
  border-radius: 16px;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 1rem;
}
.control-group {
  display: grid;
  gap: 0.5rem;
}
.control-group.actions { align-content: end; }
.group-title {
  font-size: 0.85rem;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}
.controls select, .controls button, .controls input[type="file"] {
  background: var(--card);
  color: var(--fg);
  border: 1px solid var(--border);
  padding: 0.6rem 0.8rem;
  border-radius: 10px;
}
.controls button { cursor: pointer; }
.controls button:disabled { opacity: 0.5; cursor: not-allowed; }
.controls label { color: var(--muted); display: inline-flex; align-items: center; gap: 0.4rem; }
.controls #palette { margin-left: 0.25rem; }
.controls .button-row { display: flex; gap: 0.5rem; }
.controls button {
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.06));
  border: 1px solid var(--border);
}
.controls button#applyBtn { color: var(--card); background: var(--accent); border: none; }
.controls button#applyBtn:disabled { opacity: 0.6; }

.canvas-wrap { padding: 1rem 1.5rem; }
.canvas-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 1rem;
  box-shadow: 0 10px 28px rgba(0,0,0,0.18);
  backdrop-filter: blur(8px);
}
.canvas-header { display: flex; align-items: baseline; justify-content: space-between; margin-bottom: 0.75rem; }
.canvas-header h2 { margin: 0; font-size: 1rem; letter-spacing: 0.02em; }
.canvas-meta { color: var(--muted); font-size: 0.85rem; }
#canvas { max-width: 100%; display: block; background: transparent; border: 1px dashed var(--border); border-radius: 12px; }

/* Density variants */
:root[data-density="compact"] .controls { padding: 0.75rem; gap: 0.75rem; }
:root[data-density="compact"] .controls select,
:root[data-density="compact"] .controls button,
:root[data-density="compact"] .controls input[type="file"] { padding: 0.45rem 0.6rem; border-radius: 8px; }
:root[data-density="compact"] .canvas-card { padding: 0.75rem; border-radius: 14px; }
.controls .button-row { flex-wrap: wrap; }

/* Responsive tweaks */
@media (max-width: 980px) {
  .controls { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 560px) {
  .controls { grid-template-columns: 1fr; }
}

footer { color: var(--muted); padding: 0.5rem 1.5rem 1.5rem; }